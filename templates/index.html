<th:block th:replace="~{modules/layout :: html(~{::content}, ~{::page_js}, ${site.title}, 'index')}">
  <th:block th:fragment="content" th:with="postPage=${posts != null ? posts : postFinder.list(1,10)}">
    <main class="main index-page">

      <!-- Site Intro - Header Image Area -->
      <div class="site-intro" th:style="|height: ${theme.config.style.index_intro_height ?: 50}vh;|">
        <div class="site-intro-placeholder"></div>
        <div
          class="site-intro-img"
          th:style="${theme.config.style.site_header_image != null} ? |background-image: url(${theme.config.style.site_header_image});| : ''">
        </div>
        <div class="site-intro-meta">
          <h1 class="intro-title intro-fade-in" th:text="${theme.config.basic.main_title ?: site.title}">
            Main Title
          </h1>
          <h2 class="intro-subtitle intro-fade-in" th:text="${theme.config.basic.subtitle ?: ''}">
            Subtitle
          </h2>
        </div>
      </div>

      <!-- 主体区域 -->
      <div class="page-body">
        <!-- 左侧个人资料 -->
        <aside class="profile" th:classappend="${theme.config.style.profile_sticky} ? 'profile-sticky' : ''">
          <img class="profile-avatar"
               th:classappend="${theme.config.style.avatar_border} ? '' : 'hide-border'"
               th:src="${theme.config.profile.avatar ?: '/assets/imgs/default.jpg'}"
               th:alt="${theme.config.profile.author ?: 'Avatar'}" />
          <div class="profile-name" th:text="${theme.config.profile.author ?: 'Author'}">Author</div>
          <div class="profile-signature" th:text="${theme.config.profile.signature ?: ''}"></div>

          <div class="profile-social" th:if="${not #lists.isEmpty(theme.config.profile.social)}">
            <a th:each="social : ${theme.config.profile.social}"
               th:href="${social.url}" th:class="|iconfont-archer ${social.name}|"
               target="_blank" rel="noopener noreferrer"></a>
          </div>

          <th:block th:if="${not #lists.isEmpty(theme.config.profile.profile_links)}">
            <div class="profile-link-item" th:each="link : ${theme.config.profile.profile_links}">
              <a th:href="${link.url}" target="_blank" rel="noopener noreferrer">
                <i th:if="${not #strings.isEmpty(link.icon)}"
                   th:class="|profile-item-icon ${link.icon}|"></i>
                <span th:text="${link.name}">Link Name</span>
              </a>
            </div>
          </th:block>

          <div class="friends" th:if="${not #lists.isEmpty(theme.config.profile.friends)}">
            <div>Friends</div>
            <a th:each="friend : ${theme.config.profile.friends}"
               th:href="${friend.url}" th:text="${friend.name}"
               target="_blank" rel="noopener noreferrer"></a>
          </div>
        </aside>

        <!-- 右侧文章流 -->
        <section class="content-wrapper">
          <th:block th:each="post, postStat : ${postPage.items}">
            <article class="index-post">
              <a class="abstract-title" th:href="${post.status.permalink}">
                <span class="iconfont-archer stick-top" th:if="${post.spec.pinned}">&#xe63d;</span>
                <span class="abstract-title-text" th:text="${post.spec.title ?: '[Untitled Post]'}">Post Title</span>
              </a>

              <div class="abstract-post-meta">
                <div>
                  <span class="iconfont-archer abstract-calander">&#xe616;</span>
                  <span th:text="${#dates.format(post.spec.publishTime, 'yyyy/MM/dd')}">2024/01/01</span>
                  <th:block th:if="${not #lists.isEmpty(post.categories)} and ${theme.config.style.show_categories}">
                    <span class="post-category" th:data-categories="${post.categories[0].metadata.name}">
                      <span class="iconfont-archer post-category-icon">&#xe606;</span>
                      <span class="post-category-text" th:text="${post.categories[0].spec.displayName}">Category</span>
                    </span>
                  </th:block>
                </div>
                <div class="abstract-tags" th:if="${not #lists.isEmpty(post.tags)}">
                  <a class="post-tag"
                     th:each="tag : ${post.tags}"
                     th:data-tags="${tag.metadata.name}"
                     th:text="${tag.spec.displayName}">Tag</a>
                </div>
              </div>

              <div class="abstract-content" th:if="${post.status.excerpt}" th:utext="${post.status.excerpt}"></div>
              <div class="abstract-content" th:unless="${post.status.excerpt}"
                   th:with="truncateLen=${theme.config.style.truncate_length != null ? theme.config.style.truncate_length : 300},
                            fallbackExcerpt=${post.spec.excerpt?.raw},
                            sanitizedExcerpt=${fallbackExcerpt != null ? #strings.replace(#strings.replace(fallbackExcerpt, '<', ' <'), '>', '> ') : ''}">
                <span th:if="${not #strings.isEmpty(sanitizedExcerpt)}"
                      th:text="${#strings.abbreviate(sanitizedExcerpt, truncateLen)}"></span>
                <span th:if="${#strings.isEmpty(sanitizedExcerpt)}"
                      th:text="${#strings.abbreviate(post.spec.title ?: '[Untitled Post]', truncateLen)}"></span>
              </div>

              <div class="abstract-read-more-button" th:if="${theme.config.style.read_more_button}">
                <a th:href="${post.status.permalink}">
                  阅读更多 <span class="iconfont-archer">&#xe600;</span>
                </a>
              </div>
            </article>

            <div class="index-post-divider" th:unless="${postStat.last}"></div>
          </th:block>

          <nav class="page-nav" th:if="${postPage.totalPages > 1}">
            <a th:if="${postPage.hasPrevious()}" th:href="${postPage.prevUrl}"><span>&lt; PREV</span></a>
            <th:block th:each="i : ${#numbers.sequence(1, postPage.totalPages)}">
              <a th:href="${postPage.getUrlForPage(i)}"
                 th:text="${i}" th:classappend="${i == postPage.page} ? 'current' : ''"></a>
            </th:block>
            <a th:if="${postPage.hasNext()}" th:href="${postPage.nextUrl}"><span>NEXT &gt;</span></a>
          </nav>
        </section>
      </div>
    </main>

    <!-- 内联样式 -->
    <style>

    </style>

  </th:block>
  <th:block th:fragment="page_js"></th:block>
</th:block>
