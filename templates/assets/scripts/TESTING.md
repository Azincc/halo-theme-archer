# 测试验证指南

## 概述

本文档说明如何验证替换后的源码是否正常工作。

## 快速验证清单

### 1. 页面加载验证

启动应用服务器并访问页面，检查：

- [ ] 页面正常加载，没有白屏
- [ ] 控制台显示 Archer 主题的版本信息
- [ ] 没有 JavaScript 错误（除了预期的警告）

### 2. 模块加载验证

打开浏览器开发者工具的网络面板，检查：

- [ ] `main.js` 作为 ES 模块加载（类型：`module`）
- [ ] 所有 `.js` 文件都成功加载（状态码 200）
- [ ] CDN 资源成功加载（anchor-js, perfect-scrollbar 等）
- [ ] 没有 404 错误

### 3. 功能验证

#### 3.1 主题切换
- [ ] 点击页面右上角的主题切换按钮
- [ ] 页面在亮色/暗色主题间正确切换
- [ ] 刷新页面后主题设置保持

#### 3.2 侧边栏
- [ ] 点击菜单按钮，侧边栏正确展开
- [ ] 侧边栏标签页可以切换（关于/标签/分类）
- [ ] 点击标签/分类可以过滤文章列表

#### 3.3 目录（TOC）
在有文章的页面：
- [ ] 目录正确显示在右侧
- [ ] 滚动页面时，当前章节在目录中高亮
- [ ] 点击目录项可以跳转到对应章节
- [ ] 目录可以折叠/展开

#### 3.4 滚动效果
- [ ] 向下滚动时，顶部标题栏正常显示/隐藏
- [ ] 返回顶部按钮在滚动到一定位置后显示
- [ ] 点击返回顶部按钮，页面平滑滚动到顶部

#### 3.5 图片功能
在有图片的文章页面：
- [ ] 图片正常加载显示
- [ ] 点击图片可以使用 Fancybox 查看大图
- [ ] 可以在大图模式下切换图片

#### 3.6 捐赠按钮（Post 页面）
- [ ] 阅读文章到 50% 以上时，捐赠按钮出现
- [ ] 点击捐赠按钮，弹出捐赠二维码
- [ ] 再次点击可以关闭

#### 3.7 分享功能（Post 页面）
- [ ] 分享按钮正常显示
- [ ] 点击分享按钮可以分享到各个平台
- [ ] 二维码正确生成

#### 3.8 搜索功能（如果启用 Algolia）
- [ ] 点击搜索图标，搜索弹窗正确显示
- [ ] 输入关键词可以搜索文章
- [ ] 搜索结果正确显示
- [ ] 点击结果可以跳转到文章

### 4. Font Awesome 图标验证
- [ ] 页面上的图标正常显示（不是方框或问号）
- [ ] 控制台显示 "Font Awesome loaded successfully"

### 5. 锚点链接验证
在文章页面：
- [ ] 标题右侧显示锚点链接图标（鼠标悬停时）
- [ ] 点击锚点图标可以复制链接

### 6. 控制台输出验证

打开浏览器控制台，应该看到：

```
🎯 hexo-theme-archer ⬇️
🏷 Version: 1.7.0
📅 Version date: 20240720
📦 https://github.com/fi3ework/hexo-theme-archer
site intro image loaded.
Font Awesome loaded successfully
```

不应该有以下错误：
- ❌ "Failed to load module"
- ❌ "Cannot find module"
- ❌ "SyntaxError"
- ❌ "404 (Not Found)" 对于 scripts 目录下的文件

## 调试技巧

### 常见问题

#### 1. 模块加载失败

**症状**: 控制台显示 "Failed to resolve module specifier"

**解决**: 
- 检查所有内部模块导入是否包含 `.js` 扩展名
- 确认文件路径正确

#### 2. jQuery 未定义

**症状**: 控制台显示 "$ is not defined"

**解决**:
- 确认 layout.html 中的 jQuery 已正确加载
- 检查 script 标签的顺序

#### 3. CDN 资源加载失败

**症状**: 某些功能不工作，控制台显示网络错误

**解决**:
- 检查网络连接
- 尝试访问 CDN URL 是否可达
- 考虑使用本地备份或其他 CDN

#### 4. 主题切换不工作

**症状**: 点击主题按钮没有反应

**解决**:
- 检查 `css/dark.css` 文件是否存在
- 确认 `theme.js` 正确加载
- 检查控制台是否有相关错误

### 开发者工具使用

1. **查看模块依赖**
   - 打开 Sources 面板
   - 展开 `(index)` → `top` → `templates/assets/scripts`
   - 查看所有加载的模块

2. **断点调试**
   - 在 Sources 面板中找到对应的 .js 文件
   - 点击行号设置断点
   - 重新加载页面或触发功能

3. **查看网络请求**
   - 打开 Network 面板
   - 过滤 JS 文件
   - 检查每个文件的加载状态和时间

4. **查看控制台错误**
   - 打开 Console 面板
   - 查看红色错误信息
   - 展开错误查看堆栈跟踪

## 性能检查

可选的性能验证：

- [ ] 首次加载时间在可接受范围内
- [ ] CDN 资源被正确缓存
- [ ] 滚动性能流畅，没有卡顿
- [ ] 动画和过渡效果正常

## 浏览器兼容性测试

建议在以下浏览器中测试：

- [ ] Chrome/Edge 最新版本
- [ ] Firefox 最新版本
- [ ] Safari 最新版本（Mac）

## 移动端测试

使用浏览器的响应式模式或实际移动设备测试：

- [ ] 移动端布局正确
- [ ] 触摸操作正常
- [ ] 侧边栏在移动端可以正常展开/收起

## 报告问题

如果发现问题，请记录：

1. 问题描述
2. 重现步骤
3. 浏览器版本
4. 控制台错误信息
5. Network 面板截图

## 成功标准

如果以上所有检查项都通过，说明源码替换成功，功能正常！

## 下一步

- 如果所有测试通过，可以进行进一步的开发和定制
- 如果有问题，参考 README.md 中的说明进行调试
- 生产环境建议考虑使用构建工具优化性能
