<th:block th:fragment="profile">
  <div class="profile" th:classappend="${theme.config.style.profile_sticky == true} ? ' profile-sticky'">
    <img
      class="profile-avatar"
      th:classappend="${theme.config.style.avatar_border == true} ? '' : ' hide-border'"
      th:src="${theme.config.profile.avatar != null ? theme.config.profile.avatar : (site.logo != null ? site.logo : '/assets/avatar/Misaka.jpg')}"
      alt="avatar"
    />
    <div class="profile-name" th:text="${theme.config.profile.author != null ? theme.config.profile.author : site.title}"></div>
    <div class="profile-signature" th:if="${not #strings.isEmpty(theme.config.profile.signature)}" th:utext="${theme.config.profile.signature}"></div>

    <div class="profile-social" th:if="${theme.config.profile.social != null && !theme.config.profile.social.isEmpty()}">
      <th:block th:replace="~{modules/partials/social :: social}" />
    </div>

    <div class="friends" th:if="${theme.config.profile.friends != null && !theme.config.profile.friends.isEmpty()}">
      <div>
        <i
          th:if="${theme.config.profile.profile_icons?.enable == true && not #strings.isEmpty(theme.config.profile.profile_icons.friends)}"
          th:class="${theme.config.profile.profile_icons.friends} + ' profile-item-icon'"
        ></i>
        FRIENDS
      </div>
      <span th:each="friend : ${theme.config.profile.friends}">
        <a th:href="${friend.url}" target="_blank" th:text="${friend.name}"></a>
      </span>
    </div>

    <div class="profile-link-item">
      <a th:href="@{/about}" class="about-me">
        <i
          th:if="${theme.config.profile.profile_icons?.enable == true && not #strings.isEmpty(theme.config.profile.profile_icons.about)}"
          th:class="${theme.config.profile.profile_icons.about} + ' profile-item-icon'"
        ></i>
        ABOUT ME
      </a>
    </div>

    <th:block th:if="${theme.config.search.enable == true && not #strings.isEmpty(theme.config.search.url)}">
      <th:block
        th:with="
          searchEngine=${theme.config.search.engine != null ? theme.config.search.engine : 'bing'},
          baseSearch=${searchEngine == 'google' ? 'https://www.google.com/search?q=site%3A' : (searchEngine == 'baidu' ? 'https://www.baidu.com/s?wd=site%3A' : 'https://www.bing.com/search?q=site%3A')},
          searchUrl=${baseSearch + theme.config.search.url}
        "
      >
        <div class="profile-link-item">
          <a th:href="${searchUrl}" class="search-me" target="_blank">
            <i
              th:if="${theme.config.profile.profile_icons?.enable == true && not #strings.isEmpty(theme.config.profile.profile_icons.search)}"
              th:class="${theme.config.profile.profile_icons.search} + ' profile-item-icon'"
            ></i>
            SEARCH
          </a>
        </div>
      </th:block>
    </th:block>

    <th:block th:if="${theme.config.profile.profile_links != null && !theme.config.profile.profile_links.isEmpty()}">
      <div class="profile-link-item" th:each="link : ${theme.config.profile.profile_links}">
        <a th:href="${link.url}" th:class="${'profile-link-' + #strings.replace(link.name != null ? link.name : 'link', ' ', '-')}" target="_blank">
          <i th:if="${not #strings.isEmpty(link.icon)}" th:class="${link.icon} + ' profile-item-icon'"></i>
          <span th:text="${link.name}"></span>
        </a>
      </div>
    </th:block>
  </div>
</th:block>
