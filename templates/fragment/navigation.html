<!DOCTYPE html>
<html
  th:lang="${#locale.toLanguageTag}"
  xmlns:th="http://www.thymeleaf.org"
>
  <!-- ============================================== -->
  <!-- Page Navigation with All Page Numbers         -->
  <!-- Used for: index, archives, tag, category       -->
  <!-- ============================================== -->
  <nav
    th:fragment="page-nav (pageData, firstPageUrl, pageUrlPrefix, pageUrlSuffix)"
    class="page-nav"
    th:if="${pageData.totalPages > 1}"
    th:with="
      resolvedFirst=${firstPageUrl != null ? firstPageUrl : '/'},
      resolvedPrefix=${pageUrlPrefix != null ? pageUrlPrefix : '/page/'},
      resolvedSuffix=${pageUrlSuffix != null ? pageUrlSuffix : '/'}"
  >
    <a
      class="extend prev"
      rel="prev"
      th:if="${pageData.hasPrevious()}"
      th:href="${pageData.prevUrl}"
    >&lt; PREV</a>

    <th:block th:each="i : ${#numbers.sequence(1, pageData.totalPages)}">
      <span class="page-number current" th:if="${i == pageData.page}" th:text="${i}">1</span>
      <a
        class="page-number"
        th:if="${i != pageData.page}"
        th:href="${i == 1 ? resolvedFirst : resolvedPrefix + i + resolvedSuffix}"
        th:text="${i}"
      >1</a>
    </th:block>

    <a
      class="extend next"
      rel="next"
      th:if="${pageData.hasNext()}"
      th:href="${pageData.nextUrl}"
    >NEXT &gt;</a>

    <div class="page-nav-debug" style="margin-top: 20px; padding: 15px; background: #f5f5f5; border: 1px solid #ddd; border-radius: 5px; font-family: monospace; font-size: 12px;">
      <strong style="display: block; margin-bottom: 10px; font-size: 14px; color: #333;">üîç Page Nav Debug Info</strong>
      <div style="margin: 5px 0;"><strong>resolvedFirst:</strong> <span th:text="${resolvedFirst}" style="color: #0066cc;"></span></div>
      <div style="margin: 5px 0;"><strong>resolvedPrefix:</strong> <span th:text="${resolvedPrefix}" style="color: #0066cc;"></span></div>
      <div style="margin: 5px 0;"><strong>resolvedSuffix:</strong> <span th:text="${resolvedSuffix}" style="color: #0066cc;"></span></div>
      <div style="margin: 5px 0;"><strong>prevUrl:</strong> <span th:text="${pageData.hasPrevious() ? pageData.prevUrl : 'N/A'}" style="color: #009900;"></span></div>
      <div style="margin: 5px 0;"><strong>nextUrl:</strong> <span th:text="${pageData.hasNext() ? pageData.nextUrl : 'N/A'}" style="color: #009900;"></span></div>
      <div style="margin: 5px 0;"><strong>currentPage:</strong> <span th:text="${pageData.page}" style="color: #cc0000;"></span></div>
      <div style="margin: 5px 0;"><strong>totalPages:</strong> <span th:text="${pageData.totalPages}" style="color: #cc0000;"></span></div>
      <div style="margin-top: 10px;"><strong>Generated URLs:</strong></div>
      <ul style="margin: 5px 0; padding-left: 20px;">
        <li
          th:each="i : ${#numbers.sequence(1, pageData.totalPages)}"
          style="margin: 3px 0;"
        >
          <strong>Page <span th:text="${i}"></span>:</strong> 
          <span th:text="${i == 1 ? resolvedFirst : resolvedPrefix + i + resolvedSuffix}" style="color: #0066cc;"></span>
        </li>
      </ul>
    </div>
  </nav>

  <th:block
    th:fragment="paginator (pageData, firstPageUrl, pageUrlPrefix, pageUrlSuffix)"
    th:replace="~{fragment/navigation :: page-nav(pageData=${pageData}, firstPageUrl=${firstPageUrl}, pageUrlPrefix=${pageUrlPrefix}, pageUrlSuffix=${pageUrlSuffix})}"
  />
</html>
